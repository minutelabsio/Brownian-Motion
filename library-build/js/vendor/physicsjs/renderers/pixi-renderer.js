/**
 * PhysicsJS v1.0.0-rc1 - 2014-04-13
 * A modular, extendable, and easy-to-use physics engine for javascript
 * http://wellcaffeinated.net/PhysicsJS
 *
 * Copyright (c) 2014 Jasper Palfree <jasper@wellcaffeinated.net>
 * Licensed MIT
 */

(function(e,t){typeof define=="function"&&define.amd?define(["physicsjs"],t):typeof exports=="object"?module.exports=t.apply(e,["physicsjs"].map(require)):t.call(e,e.Physics)})(this,function(e){return e.renderer("pixi",function(t){if(!document)return{};var n=Math.PI*2,r={debug:!1,metaEl:null,offset:{x:0,y:0},styles:{color:"0x66FF99",point:"0xE8900C",circle:{strokeStyle:"0xE8900C",lineWidth:3,fillStyle:"0xD5DE4C",angleIndicator:"0xE8900C"},"convex-polygon":{strokeStyle:"0xE8900C",lineWidth:3,fillStyle:"0xD5DE4C",angleIndicator:"0xE8900C"}}},i=function(t,n){return e.util.isPlainObject(n)?e.util.extend({},t,n,i):n!==undefined?n:t};return{init:function(n){if(typeof PIXI=="undefined")throw"PIXI obj not present - cannot continue ";t.init.call(this,n),this.options=e.util.extend({},r,this.options,i),this.options.offset=e.vector(this.options.offset),this.stage=new PIXI.Stage(this.options.styles.color),this.renderer=new PIXI.autoDetectRenderer(this.options.width,this.options.height),this.meta={},this.el.nodeName==="CANVAS"?this.renderer=new PIXI.autoDetectRenderer(this.options.width,this.options.height,this.el):(this.renderer=new PIXI.autoDetectRenderer(this.options.width,this.options.height),this.el!==null?this.el.appendChild(this.renderer.view):document.body.appendChild(this.renderer.view))},loadSpriteSheets:function(t,n){if(!e.util.isArray(t))throw"Spritesheets must be defined in arrays";var r=this,i=new PIXI.AssetLoader(t);return i.load(),i.on("onComplete",function(e){r.assetsLoaded=!0,n()}),r},drawBody:function(e,t){var n=e.state.pos.x,r=e.state.pos.y,i=e.state.angular.pos;t.position.x=n,t.position.y=r,t.rotation=i},render:function(e,n){t.render.call(this,e,n),this.renderer.render(this.stage)},createCircle:function(e,t,n,r){var i=new PIXI.Graphics;return i.beginFill(r.fillStyle),i.lineStyle(r.lineWidth,r.strokeStyle),i.drawCircle(e,t,n),i.pivot.x=e/2+n/2,i.pivot.y=t/2+n/2,i},createPolygon:function(e,t){var n=e[0],r=n.x,i=n.y,s=e.length,o={x:r,y:i},u=new PIXI.Graphics;u.beginFill(t.fillStyle),u.lineStyle(t.lineWidth,t.strokeStyle),u.moveTo(r,i);for(var a=1;a<s;++a)n=e[a],r=n.x,i=n.y,u.lineTo(r,i);return s>2&&u.lineTo(o.x,o.y),u.endFill(),u},createLine:function(e,t,n){var r=e.x,i=e.y,s=new PIXI.Graphics;return s.beginFill(n.fillStyle),s.lineStyle(n.lineWidth,n.strokeStyle),s.moveTo(r,i),r=t.x,i=t.y,s.lineTo(r,i),s.endFill(),s},createView:function(e){var t=null,n=e.aabb(),r=n.hw+Math.abs(n.x),i=n.hh+Math.abs(n.y),s=r+1,o=i+1,u=e.name,a=a||this.options.styles[u];s+=a.lineWidth|0,o+=a.lineWidth|0,u==="circle"?t=this.createCircle(s,o,e.radius,a):u==="convex-polygon"&&(t=this.createPolygon(e.vertices,a)),a.angleIndicator&&(t.beginFill(a.angleIndicator),t.moveTo(s/2,5+a.lineWidth),t.lineTo(s/2+e.radius/2,e.radius),t.endFill());if(t)return this.stage.addChild(t),t;throw"Invalid view name passed."},drawMeta:function(e){if(!this.meta.loaded){var t={font:"18px Snippet",fill:"white",align:"left"};this.meta.fps=new PIXI.Text("FPS: "+e.fps.toFixed(2),t),this.meta.fps.position.x=15,this.meta.fps.position.y=5,this.meta.ipf=new PIXI.Text("IPF: "+e.ipf,t),this.meta.ipf.position.x=15,this.meta.ipf.position.y=30,this.stage.addChild(this.meta.fps),this.stage.addChild(this.meta.ipf),this.meta.loaded=!0}else this.meta.fps.setText("FPS: "+e.fps.toFixed(2)),this.meta.ipf.setText("IPF: "+e.ipf)},createDisplay:function(e,t){var n=null,r=null;switch(e){case"sprite":return r=PIXI.Texture.fromImage(t.texture),n=new PIXI.Sprite(r),t.anchor&&(n.anchor.x=t.anchor.x,n.anchor.y=t.anchor.y),t.container?t.container.addChild(n):this.stage.addChild(n),n;case"movieclip":if(!this.assetsLoaded)throw"No assets have been loaded. Use loadSpritesheet() first";var i=[],s=0;for(s;s<t.frames.length;s++)r=PIXI.Texture.fromFrame(t.frames[s]),i.push(r);return n=new PIXI.MovieClip(i),t.anchor&&(n.anchor.x=t.anchor.x,n.anchor.y=t.anchor.y),t.container?t.container.addChild(n):this.stage.addChild(n),n;default:throw"Invalid PIXI.DisplayObject passed"}},centerAnchor:function(e){e!==null&&(e.anchor.x=.5,e.anchor.y=.5)}}}),e});